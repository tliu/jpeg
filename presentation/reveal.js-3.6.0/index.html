<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css">
		<link rel="stylesheet" href="css/jpeg-pres.css">
                    
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
                <section >
                    <h2>JPEG Encoding</h2>
                    <p><small> 3 types of borders in this presentation:</small></p>
                    <div class="key-border" style="width: 150px; height:150px"><i class="fas fa-image" style="margin-top: 20px;"></i><p><small>image</small></p></div>
                    <div class="key-canvas" style="width: 150px; height:150px"><i class="fas fa-paint-brush" style="margin-top: 20px;"></i><p><small>canvas</small></p></div>
                    <div class="key-zoom" style="width: 150px; height:150px"><i class="fas fa-search" style="margin-top: 20px;"></i><p><small>zoomable canvas</small></p></div>
                </section>

				<section>
                    <h2>Colors</h2>
                    <div style="float: left; width: 300px; height: 400px;">
                        <div id="pixel-grid" style="width: 300px; height: 300px; background-color: #000; position:relative; top: 0; left: 0;"></div>
                        <div id="pixel-display"><small>click on a "pixel" for (r, g, b)</small></div>
                    </div>
                    <div style="float:right; width: 600px; height: 100%;">
                    <ul>
                        <li>Images are made of pixels</li>
                        <li>Pixels are made of color components (r, g, b, a?)</li>
                        <li>1 byte per color (0-255)</li>
                        <li>3-4 bytes per pixel</li>
                    </ul>
                    </div>
                </section>

                <section>
                    <h3 style="margin-bottom: 5px">Format comparison</h3>
                    <h6>original image:  <a href="https://commons.wikimedia.org/wiki/File:Seljalandsfoss,_Su%C3%B0urland,_Islandia,_2014-08-16,_DD_201-203_HDR.JPG">Seljalandsfoss, Suðurland, Islandia</a></h6>

                    <section>
                    <div class="left" style="width: 740px">
                        <img src="img/waterfall_smaller.bmp">
                    </div>
                    <div class="right" style="width: 200px">
                        <p>rgb</p>
                        <i class="arrow down"></i>
                        <p>add some headers</p>
                        <i class="arrow down"></i>
                        <p>output.bmp <small>1920 * 1237 * 3 bytes (6.959 MB)</small></p>
                    </div>
                    </section>

                    <section>
                    <div class="left" style="width: 740px">
                        <img style="margin-top: 90px;" src="img/waterfall_smaller.png">
                    </div>
                    <div class="right" style="width: 200px">
                        <p>rgb</p>
                        <i class="arrow down"></i>
                        <p><small>some png magic</small></p>
                        <i class="arrow down"></i>
                        <p><small>LZ77, <br> huffman coding <br>(similar to zlib)</small></p>
                        <i class="arrow down"></i>
                        <p>output.png <small>1920 * 1237 (4.037 MB)</small></p>
                    </div>
                    </section>

                    <section>
                    <div class="left" style="width: 740px">
                        <img  src="img/waterfall_smaller.jpg">
                    </div>
                    <div class="right" style="width: 200px">
                        <p>rgb</p>
                        <i class="arrow down"></i>
                        <p>jpeg magic</p>
                        <i class="arrow down"></i>
                        <p>output.jpg <small>1920 * 1237</small> (0.731 MB)</p>
                    </div>
                    </section>

                    <section>
                        <img  src="img/explorer.png">
                    </section>

                </section>

                <section>
                    <h2>Lossy vs Lossless</h2>
                    <h5>Common formats on the web</h5>
                    <ul>
                        <li>Lossless: png, svg</li>
                        <li>Lossy: jpeg, gif</li>
                    </ul>
                    <p>How do we figure out what data we can throw out and still have an image that looks good enough?</p>
                </section>

                <section>
                    <h3>JPEG Compression - Colorspace Conversion</h3>
                    <section>
                    <p>RGB <i class="fas fa-arrow-right"></i> YC<sub>b</sub>C<sub>r</sub></p>
                    <div class="left" style="width: 400px">
                    <p>Y (Luminance)<small> how bright the pixel is</small></p>
                    <p>C<sub>b</sub> <small>blue component relative to green component</small></p>
                    <p>C<sub>r</sub> <small>red component relative to green component</small></p>
                    </div>
                    <div class="right" style="width: 520px;">
                    <img src="img/chrominance.png" style="width: 350px;">
                    <small>C<sub>b</sub>C<sub>r</sub> color plane at Y=0.5 (<a href="https://en.wikipedia.org/wiki/YCbCr">source</a>)</small>
                    </div>
                    </section>
                    <section>
                        <p>RGB <i class="fas fa-arrow-right"></i> YC<sub>b</sub>C<sub>r</sub></p>
                        <code>
                            Y = 0.299 * R + 0.587 * G + .114 * B
                            <br>
                            Cb = 128 + -.169 * R + -.331 * G + .5 * B
                            <br>
                            Cr = 128 + .5 * R + -.419 * G + .081 * B
                        </code>
                    </section>
                    

                </section>

                <section>
                    <h3>JPEG Compression - Colorspace Conversion</h3>
                    
                    <section>
                        <h5>Human Eye</h5>
                        <p>
                        ~90 million rods <small>(Curcio, C. A.; Sloan, K. R.; et al. (1990). "Human photoreceptor topography". The Journal of Comparative Neurology. 292 (4): 497–523.)</small>
                        </p>
                        <p>
                        ~6 million cones <small>(Osterberg, G. (1935). "Topography of the layer of rods and cones in the human retina". Acta Ophthalmol. Suppl. 13 (6): 1–102.)</small>
                        </p>
                    </section>

                    <section>
                        RGB rendered to canvas
                        <canvas class="border" id="rgb-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>
                    <section>
                        Y channel rendered to canvas
                        <canvas class="border" id="y-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>
                    <section>
                        C<sub>b</sub> channel rendered to canvas
                        <canvas class="zoomable" id="cb-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>
                    <section>
                        C<sub>r</sub> channel rendered to canvas
                        <canvas class="zoomable" id="cr-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>

                    <section>
                        <img src="img/ycbcr.png">
                        <p>
                        Because our eyes are much more sensitive to changes in brightness,  we can send the Y channel at full resolution and sub sample some of the color channels.
                        </p>
                    </section>
                    

                </section>


                <section>
                    <h3>JPEG Compression - Color Subsampling</h3>
                    <section>
                        <p><canvas class="border" id="y-full-canvas" style="width:400px; height: 257px;"></canvas>
                        <canvas class="border" id="cb-half-canvas" style="width:200px; height: 128px;"></canvas>
                        <canvas class="border" id="cr-half-canvas" style="width:200px; height: 128px;"></canvas></p>
                        <p><small>4:2:0 subsampling (half vertical and horizontal resolution)</small></p>
                        <p><small><a href="https://en.wikipedia.org/wiki/Chroma_subsampling">additional reading</a></small></p>
                    </section>
                    <section>
                        <p><img src="img/subsample.png"></p>
                    </section>
                    <section>
                        RGB rendered to canvas
                        <canvas class="zoomable" id="rgb-full-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>
                    <section>
                        Y, subsampled colors rendered to canvas
                        <canvas class="zoomable" id="rgb-sub-canvas" style="width:800px; height: 515px;"></canvas>
                    </section>


                </section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/zepto.min.js"></script>
		<script src="js/reveal.js"></script>
		<script src="js/image-readers.js"></script>
		<script src="js/jpeg-pres.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
